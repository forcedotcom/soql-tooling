<!--
  Copyright (c) 2020, salesforce.com, inc.
  All rights reserved.
  Licensed under the BSD 3-Clause license.
  For full license text, see LICENSE.txt file in the repo root or https://opensource.org/licenses/BSD-3-Clause

 -->

<template>
  <main>
    <header>
      <querybuilder-header onrunquery={handleRunQuery}></querybuilder-header>
    </header>
    <div class="row">
      <section class="column query-builder">
        <template if:true={hasUnsupported}>
          <div class="text-color-required">Unsupported Syntax</div>
        </template>
        <template if:true={hasUnknownError}>
          <div class="text-color-required">Syntax Error</div>
        </template>
        <template if:true={blockQueryBuilder}>
          <div class="block-query-builder"></div>
        </template>
        <querybuilder-from
          onobjectselected={handleObjectChange}
          sobjects={sObjects}
          selected={query.sObject}
          has-error={hasFromError}
          is-loading={isFromLoading}
        ></querybuilder-from>
        <querybuilder-fields
          selected-fields={query.fields}
          fields={fields}
          onfieldselected={handleFieldSelected}
          onfieldremoved={handleFieldRemoved}
          has-error={hasFieldsError}
          is-loading={isFieldsLoading}
        ></querybuilder-fields>
      </section>
      <section class="column query-preview">
        <querybuilder-query-preview query={query}></querybuilder-query-preview>
      </section>
    </div>
  </main>
</template>
