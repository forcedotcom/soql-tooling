# This grammar is a modified copy of a standard SQL grammar
name: SOQL
scopeName: source.soql
fileTypes: [soql]
uuid: 1CDD8B23-7C84-46AA-9302-476968A79A82

patterns:
  - include: '#expression-operators'
  - include: '#punctuation'
  - include: '#boolean-operators'
  - include: '#compare-operators'
  - include: '#boolean-literal'
  - include: '#integer-literal'
  - include: '#string-literal'
  - include: '#keywords'
  - include: '#identifiers'

repository:
  expression-operators:
    match: '[-~+*/]'
    name: keyword.operator.arithmetic
  punctuation:
    match: '[\(\),]'
    name: keyword.operator.punctuation
  boolean-operators:
    match: \b(AND|OR|NOT)\b\s*
    captures:
      '1': keyword.operator.boolean
  compare-operators:
    match: (\=|>|<|<>|!\=)
    name: keyword.operator.compare
  boolean-literal:
    match: \b(TRUE|FALSE)\b\s*
    captures:
      '1': { name: constant.language.boolean }
  keywords:
    match: \b(DIVISION|WITH|DATA|CATEGORY|AT|ABOVE|BELOW|ABOVE_OR_BELOW|OFFSET|FOR|VIEW|LIMIT|REFERENCE|TYPEOF|WHEN|WHERE|THEN|ELSE|END|DISTANCE|GEOLOCATION|GROUP|ROLLUP|CUBE|HAVING|INCLUDES|EXCLUDES|ORDER|IN|BY|ASC|DESC|NULLS|CASE|FIELDS|PACKAGE|DEFAULT|IMPORT|SWITCH|SELECT|COUNT|FROM|LOOKUP|SCOPE|AS|USING|NULL|UPDATE|FIRST|LAST|LIKE|BIND)\b\s*
    captures:
      '1': { name: keyword.other.query }
  identifiers:
    match: '[_.[:alpha:]][_.[:alnum:]]*'
    name: support.class.fieldref
  integer-literal:
    match: \b([0-9_]+)\b
    captures:
      '1': { name: constant.numeric.integer }
  string-literal:
    name: string.quoted.single
    begin: "'"
    beginCaptures:
      '0': { name: punctuation.string.begin }
    end: "'"
    endCaptures:
      '0': { name: punctuation.string.end }
    patterns:
      - include: '#string-character-escape'
  string-character-escape:
    name: constant.character.escape.apex
    match: \\.
